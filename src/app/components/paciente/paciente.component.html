<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacientes</title>
</head>
<body>
    <app-nav></app-nav>
   <main>
    <div class="title-container">
      <div class="heading-container">
        <h1 class="custom-heading">PACIENTES</h1>
        <fa-icon [icon]="add" class="action-icon" (click)="openModalPaciente()"></fa-icon>
      </div>
        <div class="search-container">
          <fa-icon [icon]="search" class="action-icon-search"></fa-icon>
          <input type="text" class="search-field" (keyup)="buscarPaciente($event)"  placeholder="Ingrese número de identificación o nombre">
        </div>
      </div>
   
    
    <div class="table-container">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8  custom-table">
          
            <ng-container matColumnDef="identificacion">
              <th mat-header-cell *matHeaderCellDef class="header-cell"> ID. </th>
              <td mat-cell *matCellDef="let element"> {{element.identificacion}} </td>
            </ng-container>
          
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef class="header-cell"> NOMBRE </th>
              <td mat-cell *matCellDef="let element"> {{element.nombre}} </td>
            </ng-container>
          
            <ng-container matColumnDef="apellido">
              <th mat-header-cell *matHeaderCellDef class="header-cell"> APELLIDO </th>
              <td mat-cell *matCellDef="let element"> {{element.apellido}} </td>
            </ng-container>

             
            <ng-container matColumnDef="fecha_nacimiento">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> FECHA DE NACIMIENTO </th>
                <td mat-cell *matCellDef="let element">{{obtenerFechaFormateada(element.fecha_nacimiento)}}</td>
              </ng-container>
          
            <ng-container matColumnDef="telefono">
              <th mat-header-cell *matHeaderCellDef class="header-cell"> TELEFONO </th>
              <td mat-cell *matCellDef="let element"> {{element.telefono}} </td>
            </ng-container>

            <ng-container matColumnDef="nombre_departamento">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> DEPARTAMENTO </th>
                <td mat-cell *matCellDef="let element"> {{element.nombre_departamento}} </td>
              </ng-container>

              <ng-container matColumnDef="nombre_ciudad">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> CIUDAD </th>
                <td mat-cell *matCellDef="let element"> {{element.nombre_ciudad}} </td>
              </ng-container>

            <ng-container matColumnDef="direccion">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> DIRECCIÓN </th>
                <td mat-cell *matCellDef="let element"> {{element.direccion}} </td>
              </ng-container>

              
              <ng-container matColumnDef="nombre_estado_civil">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> ESTADO CIVIL </th>
                <td mat-cell *matCellDef="let element"> {{element.nombre_estado_civil}} </td>
              </ng-container>

              <ng-container matColumnDef="ocupacion">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> OCUPACION </th>
                <td mat-cell *matCellDef="let element"> {{element.ocupacion}} </td>
              </ng-container>

              <ng-container matColumnDef="asegurador">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> ASEGURADOR </th>
                <td mat-cell *matCellDef="let element"> {{element.asegurador}} </td>
              </ng-container>

              <ng-container matColumnDef="afiliacion">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> AFILIACION </th>
                <td mat-cell *matCellDef="let element"> {{element.afiliacion}} </td>
              </ng-container>

              <ng-container matColumnDef="correo">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> CORREO </th>
                <td mat-cell *matCellDef="let element"> {{element.correo}} </td>
              </ng-container>

              <ng-container matColumnDef="estado">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> ESTADO </th>
                <td mat-cell *matCellDef="let paciente"> {{ obtenerEstadoPaciente(paciente.estado) }} </td>
              </ng-container>


              <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef class="header-cell"> ACCIONES </th>
                <td mat-cell *matCellDef="let paciente" class="acciones-cell"> 
                  <button mat-icon-button  (click)="abrirModalEdicion(paciente)">
                    <fa-icon [icon]="edit" style="color: #00C7E2;"></fa-icon>
                  </button>
                  <button mat-icon-button (click)="cambiarEstadoPaciente(paciente, !esActivo(paciente))">
                    <fa-icon [icon]="esActivo(paciente) ?  activeUser : disableUser" [style.color]="esActivo(paciente) ? activoColor : inactivoColor"></fa-icon>
                  </button> 
                </td>
              </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        
  <mat-paginator [pageSizeOptions]="[5, 10, 20]"
  showFirstLastButtons
  aria-label="Select page of periodic elements">
</mat-paginator>      
</div>
</main>
</body>
<br>
<app-footer></app-footer>
</html>
